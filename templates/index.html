<!DOCTYPE html><html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PlaylistGPT</title>
    <link
        rel="shortcut icon"
        href="{{ url_for("static", filename="playlistgpt-icon.png") }}"
    />
    <link rel="stylesheet" href="{{ url_for("static", filename="main.css") }}" />
    <script src="{{ url_for("static", filename="main.js") }}"></script>
</head>

<body>
    <header class="header">
        <img src="{{ url_for("static", filename="playlistgpt-icon.png") }}" class="icon" alt="PlaylistGPT Icon" />
        <h1>PlaylistGPT</h1>
    </header>
    <h3>Ask a question about your Spotify playlist and see if OpenAI's language model can write the necessary Python code to answer it!</h3>

    <form action="/" method="post" role="search" id="playlist-form">
        <input type="hidden" name="form_type" value="playlist">

        <label for="playlist_name">Your playlist name:</label>
        <input type="text" name="playlist_name" placeholder="Enter your playlist name exactly." value="{{ playlist_name or '' }}" required />

        <label for="question">What you want to know about it:</label>
        <input type="text" name="question" placeholder="Enter your question." required />

        <input type="submit" value="Find out!" title="Submit your question" />
    </form>
    <div class="loading-indicator" id="loading-indicator" style="display: none;">
        <div class="spinner"></div>
        <p>Loading, please wait...</p>
    </div>

    {% if result %}
    <div class="result">
        <h2>Result:</h2>
        <p>{{ result|safe }}</p>
    </div>
    {% endif %}

    {% if gpt_code %}
    <div class="code">
        <h2>Generated Code:</h2>
        <pre><code>{{ gpt_code }}</code></pre>
        <form action="/" method="post" role="search" id="code-form">
            <input type="hidden" name="form_type" value="code">
            <input type="hidden" name="playlist_name" value="{{ playlist_name }}">
            <input type="hidden" name="gpt_code" value="{{ gpt_code }}">
            <input type="submit" value="Looks good â€“ run code!" title="Run generated code" />
        </form>
    </div>
    {% endif %}

    <div class="sample-questions">
        <h2>Sample questions:</h2>
        <p><a href="#" onclick="fillQuestion('What is the top genre in my playlist?'); return false;">
            What is the top genre in my playlist?
        </a></p>
        <p><a href="#" onclick="fillQuestion('What\'s the most popular song in my playlist?'); return false;">
            What's the most popular song in my playlist?
        </a></p>
        <p><a href="#" onclick="fillQuestion('How many songs in my playlist are from the 80s?'); return false;">
            How many songs in my playlist are from the 80s?
        </a></p>
    </div>
    
    <footer class="footer">
        <p>Created by Sav Bell</p>
        <div class="social-links">
            <a href="https://github.com/savbell/playlist-gpt" target="_blank" rel="noopener noreferrer" aria-label="PlaylistGPT's GitHub Page">
                <img src="{{ url_for("static", filename="github-icon.png") }}" alt="GitHub Icon" class="social-icon" />
            </a>
            <a href="https://open.spotify.com/user/sav-bell" target="_blank" rel="noopener noreferrer" aria-label="Sav Bell's Spotify Profile">
                <img src="{{ url_for("static", filename="spotify-icon.png") }}" alt="Spotify Icon" class="social-icon" />
            </a>
            <a href="https://www.linkedin.com/in/savbell/" target="_blank" rel="noopener noreferrer" aria-label="Sav Bell's LinkedIn Profile">
                <img src="{{ url_for("static", filename="linkedin-icon.png") }}" alt="LinkedIn Icon" class="social-icon" />
            </a>
        </div>
    </footer>
    
</body>
</html>
